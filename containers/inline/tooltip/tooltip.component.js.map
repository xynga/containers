{"version":3,"file":"tooltip.component.js","sourceRoot":"","sources":["../../../inline/tooltip/tooltip.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, Input, Output, EventEmitter, ViewChild, NgZone, OnDestroy} from '@angular/core';\nimport {animate, trigger, state, style, transition} from '@angular/animations';\nimport * as Tether from 'tether';\n\nconst tooltipSpeed: number = 250;\nconst easeOutQuart: string = 'cubic-bezier(0.165, 0.840, 0.440, 1.000)';\n\nconst opacityOff = style({\n  opacity: 0\n});\nconst opacityOn = style({\n  opacity: 1\n});\n\nconst SELECTOR: string = 'tooltip';\n\n@Component({\n  selector: SELECTOR,\n  template: `\n    <div class=\"tooltip\" #container [@tooltipState]=\"tooltipState\" [ngClass]=\"cssClass\" [class.macro-tooltip--tutorial]=\"isTutoring\">\n      <div *ngIf=\"active\" class=\"tooltip__viewport\">\n        <div class=\"arrow\"></div>\n        <div class=\"tooltip__content\">\n          <ng-content></ng-content>\n          <div *ngIf=\"isTutoring\">\n            <button *ngIf=\"!first\" padding-lg-horizontal class=\"btn\" (click)=\"onTooltipNavigate.emit('prev')\">\n              Previous\n            </button>\n            <button *ngIf=\"!last\" padding-lg-horizontal class=\"btn\" (click)=\"onTooltipNavigate.emit('next')\">\n              Next\n            </button>\n            <button margin-left class=\"link-btn\" (click)=\"onTooltipNavigate.emit('end')\">\n              <strong *ngIf=\"first\">\n                Quit\n              </strong>\n              <strong *ngIf=\"last\">\n                Finish\n              </strong>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  animations: [\n    trigger('tooltipState', [\n      state('inactive, expanded', opacityOff),\n      state('active', opacityOn),\n      transition('* => active', animate(`${tooltipSpeed}ms ${easeOutQuart}`)),\n      transition('* => inactive', animate(`${tooltipSpeed}ms ${easeOutQuart}`))\n    ])\n  ],\n  styles: [`\n    .tooltip{position:absolute;z-index:10000;max-width:380px;padding:1px;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,0.2);opacity:0;box-shadow:2px 2px 10px 0 rgba(0,0,0,0.3)}.tooltip.tether-element-attached-bottom.tether-target-attached-top{margin-bottom:25px;margin-top:-25px}.tooltip.tether-element-attached-bottom.tether-target-attached-top .arrow{border-bottom-width:0;border-top-color:rgba(0,0,0,0.25);bottom:-21px}.tooltip.tether-element-attached-bottom.tether-target-attached-top .arrow:after{content:\"\";bottom:1px;margin-left:-20px;border-bottom-width:0;border-top-color:#fff}.tooltip.tether-element-attached-bottom.tether-target-attached-top.tooltip--tutorial .arrow:after{border-top-color:#003d7c}.tooltip.tether-element-attached-top.tether-target-attached-bottom{margin-top:25px}.tooltip.tether-element-attached-top.tether-target-attached-bottom .arrow{border-top-width:0;border-bottom-color:rgba(0,0,0,0.25);top:-21px}.tooltip.tether-element-attached-top.tether-target-attached-bottom .arrow:after{content:\"\";top:1px;margin-left:-20px;border-top-width:0;border-bottom-color:#fff}.tooltip.tether-element-attached-top.tether-target-attached-bottom.tooltip--tutorial .arrow:after{border-bottom-color:color(brand-primary-dark)}.tooltip.tether-element-attached-right.tether-target-attached-left{margin-left:-25px}.tooltip.tether-element-attached-right.tether-target-attached-left .arrow{right:-21px;border-right-width:0;border-left-color:rgba(0,0,0,0.25)}.tooltip.tether-element-attached-right.tether-target-attached-left .arrow:after{content:\" \";right:1px;border-right-width:0;border-left-color:#fff;bottom:-20px}.tooltip.tether-element-attached-right.tether-target-attached-left.tooltip--tutorial .arrow:after{border-left-color:#003d7c}.tooltip.tether-element-attached-left.tether-target-attached-right{margin-left:25px}.tooltip.tether-element-attached-left.tether-target-attached-right .arrow{left:-21px;border-left-width:0;border-right-color:rgba(0,0,0,0.25)}.tooltip.tether-element-attached-left.tether-target-attached-right .arrow:after{content:\" \";left:1px;bottom:-20px;border-left-width:0;border-right-color:#fff}.tooltip.tether-element-attached-left.tether-target-attached-right.tooltip--tutorial .arrow:after{border-right-color:#003d7c}.tooltip__content{padding:16px}.tooltip__content p:last-child,.tooltip__content ul:last-child{margin-bottom:0}.tooltip .arrow{border-width:21px}.tooltip .arrow,.tooltip .arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.tooltip .arrow:after{border-width:20px;content:\"\"}.tooltip.tether-target-attached-top.tether-target-attached-middle .arrow,.tooltip.tether-target-attached-bottom.tether-target-attached-middle .arrow{left:50%;margin-left:-21px}.tooltip.tether-element-attached-left.tether-target-attached-right.tether-element-attached-top,.tooltip.tether-element-attached-right.tether-target-attached-left.tether-element-attached-top{margin-top:-15px}.tooltip.tether-element-attached-left.tether-target-attached-right.tether-element-attached-top .arrow,.tooltip.tether-element-attached-right.tether-target-attached-left.tether-element-attached-top .arrow{top:15px}.tooltip.tether-element-attached-left.tether-target-attached-right.tether-element-attached-bottom,.tooltip.tether-element-attached-right.tether-target-attached-left.tether-element-attached-bottom{margin-top:15px}.tooltip.tether-element-attached-left.tether-target-attached-right.tether-element-attached-bottom .arrow,.tooltip.tether-element-attached-right.tether-target-attached-left.tether-element-attached-bottom .arrow{top:auto;bottom:15px}.tooltip.tether-element-attached-top.tether-target-attached-bottom.tether-element-attached-right .arrow,.tooltip.tether-element-attached-bottom.tether-target-attached-top.tether-element-attached-right .arrow{left:auto;right:15px}.tooltip.tether-element-attached-top.tether-target-attached-bottom.tether-element-attached-left .arrow,.tooltip.tether-element-attached-bottom.tether-target-attached-top.tether-element-attached-left .arrow{left:15px}.tooltip--tutorial{background:#003d7c}.tooltip--tutorial,.tooltip--tutorial h1,.tooltip--tutorial .h1,.tooltip--tutorial h2,.tooltip--tutorial .h2,.tooltip--tutorial h3,.tooltip--tutorial .h2,.tooltip--tutorial h4,.tooltip--tutorial .h4,.tooltip--tutorial h5,.tooltip--tutorial .h5,.tooltip--tutorial .link-btn{color:#fff}\n  `]\n})\nexport class TooltipComponent implements OnDestroy {\n  @ViewChild('container') container: any;\n\n  @Input() public cssClass: string = '';\n\n  @Input() public tutorialIndex: number;\n  @Input() public first: boolean = false;\n  @Input() public last: boolean = false;\n\n  @Input() attachment: string = 'top left';\n  @Input() targetAttachment: string = 'top right';\n\n  @Output() onTooltipToggle: EventEmitter<any> = new EventEmitter();\n  @Output() onTooltipNavigate: EventEmitter<any> = new EventEmitter();\n\n  public tooltipState: string = 'inactive';\n  public active: boolean = false;\n  public isTutoring: boolean = false;\n\n  private target: HTMLElement;\n  private tether: any;\n\n  private disableTimeout: any;\n  private enableTimeout: any;\n\n  public constructor(private zone: NgZone) {}\n\n  public setupTooltip(target: HTMLElement, attachment: string, targetAttachment: string): void {\n    this.target = target;\n\n    this.attachment = attachment;\n    this.targetAttachment = targetAttachment;\n\n    this.initTooltip();\n  }\n\n  public destroyTooltip(): void {\n    if (this.tether) {\n      this.active = false;\n      this.tether.destroy();\n    }\n\n    Array.prototype.forEach.call(document.querySelectorAll('body>.macro-tooltip'), (el:any) => el.parentNode.removeChild(el));\n  }\n\n  public clearTimeouts(): void {\n    if (this.disableTimeout) {\n      clearTimeout(this.disableTimeout);\n    }\n    if (this.enableTimeout) {\n      clearTimeout(this.enableTimeout);\n    }\n  }\n\n  public toggle(): void {\n    this.active ? this.hide() : this.show();\n  }\n\n  public hide(): void {\n    if (this.active) {\n      this.tooltipState = 'inactive';\n      this.onTooltipToggle.emit(false);\n\n      this.disableTimeout = setTimeout(() => this.active = false, tooltipSpeed);\n    }\n  }\n\n  public show(): void {\n    if (!this.active) {\n      this.tooltipState = 'active';\n      this.active = true;\n      this.onTooltipToggle.emit(true);\n\n      this.zone.runOutsideAngular(() => this.enableTimeout = setTimeout(() => this.tether.position()));\n    }\n  }\n\n  public initTooltip(): void {\n    this.zone.runOutsideAngular(() => {\n      this.tether = new Tether({\n        element: this.container.nativeElement,\n        target: this.target,\n        attachment: this.attachment,\n        targetAttachment: this.targetAttachment,\n        constraints: [\n          {\n            to: 'window',\n            attachment: 'together'\n          }\n        ]\n      });\n    });\n  }\n\n  public ngOnDestroy(): void {\n    this.destroyTooltip();\n    //super.ngOnDestroy();\n  }\n}\n\n"]}