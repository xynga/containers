{"version":3,"file":"collapse.component.js","sourceRoot":"","sources":["../../../inline/collapse/collapse.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,SAAS,EAAE,KAAK,EAAE,SAAS,EAAS,MAAM,eAAe,CAAC;AAElE,IAAM,QAAQ,GAAW,UAAU,CAAC;;;yBAkBb,KAAK;8BACQ,CAAC;;0BAEtB,uCAAQ;uBAAC,QAAiB;YACrC,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,IAAI,CAAC,gBAAgB,EAAE,CAAC;aACzB;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,kBAAkB,EAAE,CAAC;aAC3B;;;;;IAKI,oCAAQ,GAAf;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;IAED,uCAAW,GAAX;QACE,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;KACzB;IAED,2CAAe,GAAf;QAAA,iBAOC;QANC,IAAI,CAAC,gBAAgB,EAAE;aAClB,IAAI,CAAC;YACJ,UAAU,CAAC;gBACT,KAAI,CAAC,WAAW,EAAE,CAAC;aACpB,EAAE,GAAG,CAAC,CAAC;SACT,CAAC,CAAC;KACR;IAED,4CAAgB,GAAhB;QAAA,iBAGC;QAFC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,eAAe,EAAE,EAAtB,CAAsB,CAAC,CAAC;KAC1C;IAED,4CAAgB,GAAhB;QAAA,iBAKC;QAJC,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QACxB,UAAU,CAAC;YACT,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;SACxB,EAAE,GAAG,CAAC,CAAC;KACT;IAED,8CAAkB,GAAlB;QAAA,iBAKC;QAJC,IAAI,CAAC,gBAAgB,EAAE;aAClB,IAAI,CAAC;YACJ,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,CAAC,CAAC;SAC3C,CAAC,CAAC;KACR;IAED,4CAAgB,GAAhB;QACE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC;QACvF,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;KAC7C;;gBAvEF,SAAS,SAAC;oBACT,QAAQ,EAAE,QAAQ;oBAClB,QAAQ,EAAE,+OAQT;oBACD,MAAM,EAAE,CAAC,6DAER,CAAC;iBACH;;;;;6BAKE,KAAK;4BASL,SAAS,SAAC,SAAS;;4BAhCtB;;SAmBa,iBAAiB","sourcesContent":["import {Component, Input, ViewChild, OnInit} from '@angular/core';\n\nconst SELECTOR: string = 'collapse';\n\n@Component({\n  selector: SELECTOR,\n  template: `\n    <div class=\"collapse\" [ngStyle]=\"{height: collapseHeight}\">\n      <div #content class=\"collapse__content\">\n        <div *ngIf=\"_isActive\">\n          <ng-content></ng-content>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .collapse{overflow:hidden;transition:height 0.4s}\n  `]\n})\nexport class CollapseComponent implements OnInit {\n  _isActive: boolean = false;\n  collapseHeight: number | string = 0;\n\n  @Input() set isActive(isActive: boolean) {\n    if (isActive) {\n      this.activateCollapse();\n    }\n    else {\n      this.deactivateCollapse();\n    }\n  }\n\n  @ViewChild('content') content: any;\n\n  public ngOnInit(): void {\n    if (this._isActive) {\n      this.resetHeight();\n    }\n  }\n\n  resetHeight(): void {\n    this.collapseHeight = 0;\n  }\n\n  runCollapseOpen(): void {\n    this.setContentHeight()\n        .then(() => {\n          setTimeout(() => {\n            this.resetHeight();\n          }, 400);\n        });\n  }\n\n  activateCollapse(): void {\n    this._isActive = true;\n    setTimeout(() => this.runCollapseOpen());\n  }\n\n  runCollapseClose(): void {\n    this.collapseHeight = 0;\n    setTimeout(() => {\n      this._isActive = false;\n    }, 400);\n  }\n\n  deactivateCollapse(): void {\n    this.setContentHeight()\n        .then(() => {\n          setTimeout(() => this.runCollapseClose());\n        });\n  }\n\n  setContentHeight(): Promise<number | string> {\n    this.collapseHeight = this.content.nativeElement.getBoundingClientRect().height + 'px';\n    return Promise.resolve(this.collapseHeight);\n  }\n}\n"]}